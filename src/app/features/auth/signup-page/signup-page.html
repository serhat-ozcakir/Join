<div class="signup-container">
  <div class="signup-card">
    <h1>Sign Up</h1>
    <div class="underline"></div>

    @if (successMessage()) {
      <div class="success-message">{{ successMessage() }}</div>
      <div class="links">
        <a routerLink="/login">Back to Login</a>
      </div>
    } @else {
      @if (supabase.authError()) {
        <div class="error-message">{{ supabase.authError() }}</div>
      }

      <form #signupForm="ngForm" (ngSubmit)="signupForm.valid && signup()">
        <div class="form-group">
            <div class="input-wrap">
          <input
            type="text"
            placeholder="Name"
            [ngModel]="displayName()"
            (ngModelChange)="displayName.set($event)"
            name="displayName"
            required
            #nameInput="ngModel"
          />
           <img class="input-icon" src="assets/icons/person.png" alt="" aria-hidden="true" />
          </div>
          @if (nameInput.invalid && nameInput.touched) {
            <span class="error">Name is required</span>
          }
        </div>

        <div class="form-group">
            <div class="input-wrap">
          <input
            type="email"
            placeholder="Email"
            [ngModel]="email()"
            (ngModelChange)="email.set($event)"
            name="email"
            required
            email
            #emailInput="ngModel"
          />
           <img class="input-icon" src="assets/icons/mail.png" alt="" aria-hidden="true" />
          </div>
          @if (emailInput.invalid && emailInput.touched) {
            <span class="error">Valid email is required</span>
          }
        </div>

        <div class="form-group">
             <div class="input-wrap">
          <input
            type="password"
            placeholder="Password"
            [ngModel]="password()"
            (ngModelChange)="password.set($event)"
            name="password"
            required
            minlength="6"
            #passwordInput="ngModel"
          />
           <img class="input-icon" src="assets/icons/lock.png" alt="" aria-hidden="true" />
          </div>
          @if (passwordInput.invalid && passwordInput.touched) {
            <span class="error">Password must be at least 6 characters</span>
          }
        </div>

        <div class="form-group">
           <div class="input-wrap">
          <input
            type="password"
            placeholder="Confirm Password"
            [ngModel]="confirmPassword()"
            (ngModelChange)="confirmPassword.set($event)"
            name="confirmPassword"
            required
            #confirmInput="ngModel"
          />
           <img class="input-icon" src="assets/icons/lock.png" alt="" aria-hidden="true" />
          </div>
        </div>
        <div class="form-group form-check">
          <input 
          type="checkbox" name="" id="checkbox">
          <label for="checkbox">I accept the <span>Privacy Policy</span></label>
        </div>

        <div class="form-actions">
          <button type="submit" [disabled]="signupForm.invalid || supabase.authLoading()">
            {{ supabase.authLoading() ? 'Loading...' : 'Sign Up' }}
          </button>
        </div>
      </form>

      <div class="links">
        <a routerLink="/login">Already have an account? Login</a>
      </div>
    }
  </div>
</div>
